{"version":3,"sources":["/home/runner/workspace/src/components/auth/__tests__/google-auth-button.test.tsx"],"sourcesContent":["import { screen, fireEvent, waitFor } from '@testing-library/react'\nimport { signIn } from 'next-auth/react'\n\nimport { GoogleAuthButton } from '../google-auth-button'\nimport { render } from '@testing-library/react'\n\n// Mock next-auth\njest.mock('next-auth/react')\nconst mockSignIn = signIn as jest.MockedFunction<typeof signIn>\n\ndescribe('GoogleAuthButton', () => {\n  beforeEach(() => {\n    jest.clearAllMocks()\n  })\n\n  it('renders with default props', () => {\n    render(<GoogleAuthButton />)\n\n    const button = screen.getByRole('button')\n    expect(button).toBeInTheDocument()\n    expect(button).toHaveTextContent(/sign in with google/i)\n  })\n\n  it('triggers Google sign in when clicked', async () => {\n    mockSignIn.mockResolvedValue({\n      error: undefined,\n      ok: true,\n      status: 200,\n      url: null,\n      code: undefined,\n    })\n\n    render(<GoogleAuthButton />)\n\n    const button = screen.getByRole('button')\n    fireEvent.click(button)\n\n    await waitFor(() => {\n      expect(mockSignIn).toHaveBeenCalledWith('google', {\n        callbackUrl: '/dashboard/drive',\n      })\n    })\n  })\n\n  it('calls custom onClick handler when provided', async () => {\n    const mockOnClick = jest.fn()\n\n    render(<GoogleAuthButton onClick={mockOnClick} />)\n\n    const button = screen.getByRole('button')\n    fireEvent.click(button)\n\n    await waitFor(() => {\n      expect(mockOnClick).toHaveBeenCalled()\n    })\n  })\n\n  it('applies custom className', () => {\n    const customClass = 'custom-button-class'\n\n    render(<GoogleAuthButton className={customClass} />)\n\n    const button = screen.getByRole('button')\n    expect(button).toHaveClass(customClass)\n  })\n\n  it('handles sign in error gracefully', async () => {\n    const consoleError = jest.spyOn(console, 'error').mockImplementation(() => {})\n    mockSignIn.mockRejectedValue(new Error('Sign in failed'))\n\n    render(<GoogleAuthButton />)\n\n    const button = screen.getByRole('button')\n    fireEvent.click(button)\n\n    await waitFor(() => {\n      expect(mockSignIn).toHaveBeenCalled()\n    })\n\n    consoleError.mockRestore()\n  })\n\n  it('is accessible with proper ARIA attributes', () => {\n    render(<GoogleAuthButton />)\n\n    const button = screen.getByRole('button')\n    expect(button).toBeVisible()\n    expect(button).not.toHaveAttribute('aria-disabled')\n  })\n})\n"],"names":["jest","mock","mockSignIn","signIn","describe","beforeEach","clearAllMocks","it","render","GoogleAuthButton","button","screen","getByRole","expect","toBeInTheDocument","toHaveTextContent","mockResolvedValue","error","undefined","ok","status","url","code","fireEvent","click","waitFor","toHaveBeenCalledWith","callbackUrl","mockOnClick","fn","onClick","toHaveBeenCalled","customClass","className","toHaveClass","consoleError","spyOn","console","mockImplementation","mockRejectedValue","Error","mockRestore","toBeVisible","not","toHaveAttribute"],"mappings":";AAMA,iBAAiB;AACjBA,KAAKC,IAAI,CAAC;;;;;uBAPiC;wBACpB;kCAEU;AAKjC,MAAMC,aAAaC,cAAM;AAEzBC,SAAS,oBAAoB;IAC3BC,WAAW;QACTL,KAAKM,aAAa;IACpB;IAEAC,GAAG,8BAA8B;QAC/BC,IAAAA,aAAM,gBAAC,qBAACC,kCAAgB;QAExB,MAAMC,SAASC,aAAM,CAACC,SAAS,CAAC;QAChCC,OAAOH,QAAQI,iBAAiB;QAChCD,OAAOH,QAAQK,iBAAiB,CAAC;IACnC;IAEAR,GAAG,wCAAwC;QACzCL,WAAWc,iBAAiB,CAAC;YAC3BC,OAAOC;YACPC,IAAI;YACJC,QAAQ;YACRC,KAAK;YACLC,MAAMJ;QACR;QAEAV,IAAAA,aAAM,gBAAC,qBAACC,kCAAgB;QAExB,MAAMC,SAASC,aAAM,CAACC,SAAS,CAAC;QAChCW,gBAAS,CAACC,KAAK,CAACd;QAEhB,MAAMe,IAAAA,cAAO,EAAC;YACZZ,OAAOX,YAAYwB,oBAAoB,CAAC,UAAU;gBAChDC,aAAa;YACf;QACF;IACF;IAEApB,GAAG,8CAA8C;QAC/C,MAAMqB,cAAc5B,KAAK6B,EAAE;QAE3BrB,IAAAA,aAAM,gBAAC,qBAACC,kCAAgB;YAACqB,SAASF;;QAElC,MAAMlB,SAASC,aAAM,CAACC,SAAS,CAAC;QAChCW,gBAAS,CAACC,KAAK,CAACd;QAEhB,MAAMe,IAAAA,cAAO,EAAC;YACZZ,OAAOe,aAAaG,gBAAgB;QACtC;IACF;IAEAxB,GAAG,4BAA4B;QAC7B,MAAMyB,cAAc;QAEpBxB,IAAAA,aAAM,gBAAC,qBAACC,kCAAgB;YAACwB,WAAWD;;QAEpC,MAAMtB,SAASC,aAAM,CAACC,SAAS,CAAC;QAChCC,OAAOH,QAAQwB,WAAW,CAACF;IAC7B;IAEAzB,GAAG,oCAAoC;QACrC,MAAM4B,eAAenC,KAAKoC,KAAK,CAACC,SAAS,SAASC,kBAAkB,CAAC,KAAO;QAC5EpC,WAAWqC,iBAAiB,CAAC,IAAIC,MAAM;QAEvChC,IAAAA,aAAM,gBAAC,qBAACC,kCAAgB;QAExB,MAAMC,SAASC,aAAM,CAACC,SAAS,CAAC;QAChCW,gBAAS,CAACC,KAAK,CAACd;QAEhB,MAAMe,IAAAA,cAAO,EAAC;YACZZ,OAAOX,YAAY6B,gBAAgB;QACrC;QAEAI,aAAaM,WAAW;IAC1B;IAEAlC,GAAG,6CAA6C;QAC9CC,IAAAA,aAAM,gBAAC,qBAACC,kCAAgB;QAExB,MAAMC,SAASC,aAAM,CAACC,SAAS,CAAC;QAChCC,OAAOH,QAAQgC,WAAW;QAC1B7B,OAAOH,QAAQiC,GAAG,CAACC,eAAe,CAAC;IACrC;AACF"}