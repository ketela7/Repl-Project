{"version":3,"names":["DELETE","cov_2cnkgfocvi","f","s","GET","authResult","_apiutils","initDriveService","success","b","response","stats","_performance","performanceMonitor","getStats","_server","NextResponse","json","data","performance","timestamp","Date","toISOString","summary","totalOperations","Object","values","reduce","sum","stat","count","avgResponseTime","avgTime","keys","length","overallErrorRate","errorRate","error","status","reset","message"],"sources":["/home/runner/workspace/src/app/api/drive/performance/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server'\n\nimport { performanceMonitor } from '@/lib/google-drive/performance'\nimport { initDriveService } from '@/lib/api-utils'\n\nexport async function GET() {\n  try {\n    const authResult = await initDriveService()\n    if (!authResult.success) {\n      return authResult.response!\n    }\n\n    const stats = performanceMonitor.getStats()\n\n    return NextResponse.json({\n      success: true,\n      data: {\n        performance: stats,\n        timestamp: new Date().toISOString(),\n        summary: {\n          totalOperations: Object.values(stats).reduce((sum, stat) => sum + stat.count, 0),\n          avgResponseTime:\n            Object.values(stats).reduce((sum, stat) => sum + stat.avgTime, 0) / Object.keys(stats).length || 0,\n          overallErrorRate:\n            Object.values(stats).reduce((sum, stat) => sum + stat.errorRate, 0) / Object.keys(stats).length || 0,\n        },\n      },\n    })\n  } catch (error) {\n    return NextResponse.json({ error: 'Failed to fetch performance metrics' }, { status: 500 })\n  }\n}\n\nexport async function DELETE() {\n  try {\n    const authResult = await initDriveService()\n    if (!authResult.success) {\n      return authResult.response!\n    }\n\n    performanceMonitor.reset()\n\n    return NextResponse.json({\n      success: true,\n      message: 'Performance metrics reset successfully',\n    })\n  } catch (error) {\n    return NextResponse.json({ error: 'Failed to reset performance metrics' }, { status: 500 })\n  }\n}\n"],"mappings":"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","ignoreList":[]}