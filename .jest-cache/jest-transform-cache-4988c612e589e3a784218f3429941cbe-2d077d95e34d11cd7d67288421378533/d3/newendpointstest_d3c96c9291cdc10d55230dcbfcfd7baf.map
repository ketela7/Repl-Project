{"version":3,"sources":["/home/runner/workspace/__tests__/api/new-endpoints.test.ts"],"sourcesContent":["/**\n * Jest Tests for New Static API Endpoints\n * Testing all refactored API endpoints from /api/drive/files/[fileId]/* to /api/drive/files/*\n */\n\nimport { NextRequest } from 'next/server'\nimport { POST } from '@/app/api/drive/files/details/route'\nimport { POST as DownloadPOST } from '@/app/api/drive/files/download/route'\nimport { POST as MovePOST } from '@/app/api/drive/files/move/route'\nimport { POST as CopyPOST } from '@/app/api/drive/files/copy/route'\nimport { POST as RenamePOST } from '@/app/api/drive/files/rename/route'\nimport { POST as TrashPOST } from '@/app/api/drive/files/trash/route'\nimport { POST as UntrashPOST } from '@/app/api/drive/files/untrash/route'\nimport { POST as DeletePOST } from '@/app/api/drive/files/delete/route'\nimport { POST as SharePOST } from '@/app/api/drive/files/share/route'\nimport { POST as ExportPOST } from '@/app/api/drive/files/export/route'\nimport { POST as EssentialPOST } from '@/app/api/drive/files/essential/route'\nimport { POST as ExtendedPOST } from '@/app/api/drive/files/extended/route'\n\n// Mock NextAuth\njest.mock('next-auth', () => ({\n  default: jest.fn(() => ({\n    handlers: { GET: jest.fn(), POST: jest.fn() },\n    auth: jest.fn(),\n    signIn: jest.fn(),\n    signOut: jest.fn(),\n  })),\n}))\n\n// Mock Google Drive Service\njest.mock('@/lib/google-drive/service', () => ({\n  GoogleDriveService: jest.fn().mockImplementation(() => ({\n    getFileDetails: jest.fn().mockResolvedValue({\n      id: 'test-file-id',\n      name: 'test-file.txt',\n      mimeType: 'text/plain',\n      size: '1024',\n      createdTime: '2025-01-01T00:00:00Z',\n      modifiedTime: '2025-01-01T00:00:00Z',\n    }),\n    getFileMetadata: jest.fn().mockResolvedValue({\n      id: 'test-file-id',\n      name: 'test-file.txt',\n      mimeType: 'text/plain',\n      size: '1024',\n    }),\n    moveFile: jest.fn().mockResolvedValue({ success: true }),\n    copyFile: jest.fn().mockResolvedValue({ success: true }),\n    renameFile: jest.fn().mockResolvedValue({ success: true }),\n    moveToTrash: jest.fn().mockResolvedValue({ success: true }),\n    untrashFile: jest.fn().mockResolvedValue({ success: true }),\n    deleteFile: jest.fn().mockResolvedValue({ success: true }),\n    shareFile: jest.fn().mockResolvedValue({ success: true }),\n    exportFile: jest.fn().mockResolvedValue(new ArrayBuffer(8)),\n    downloadFile: jest.fn().mockResolvedValue('file-content'),\n  })),\n}))\n\n// Mock API Utils\njest.mock('@/lib/api-utils', () => ({\n  initDriveService: jest.fn().mockResolvedValue({\n    success: true,\n    driveService: {\n      getFileDetails: jest.fn().mockResolvedValue({\n        id: 'test-file-id',\n        name: 'test-file.txt',\n      }),\n      getFileMetadata: jest.fn().mockResolvedValue({\n        id: 'test-file-id',\n        name: 'test-file.txt',\n      }),\n      moveFile: jest.fn().mockResolvedValue({ success: true }),\n      copyFile: jest.fn().mockResolvedValue({ success: true }),\n      renameFile: jest.fn().mockResolvedValue({ success: true }),\n      moveToTrash: jest.fn().mockResolvedValue({ success: true }),\n      untrashFile: jest.fn().mockResolvedValue({ success: true }),\n      deleteFile: jest.fn().mockResolvedValue({ success: true }),\n      shareFile: jest.fn().mockResolvedValue({ success: true }),\n      exportFile: jest.fn().mockResolvedValue(new ArrayBuffer(8)),\n      downloadFile: jest.fn().mockResolvedValue('file-content'),\n    },\n  }),\n  handleApiError: jest.fn().mockReturnValue(new Response('Error', { status: 500 })),\n  validateShareRequest: jest.fn().mockReturnValue(true),\n  validateOperationsRequest: jest.fn().mockReturnValue(true),\n}))\n\n// Mock throttle and retry\njest.mock('@/lib/api-throttle', () => ({\n  throttledDriveRequest: jest.fn().mockImplementation((fn) => fn()),\n}))\n\njest.mock('@/lib/api-retry', () => ({\n  retryDriveApiCall: jest.fn().mockImplementation((fn) => fn()),\n}))\n\ndescribe('API Endpoints - New Static Routing', () => {\n  let mockRequest: NextRequest\n\n  beforeEach(() => {\n    jest.clearAllMocks()\n  })\n\n  const createMockRequest = (body: any) => {\n    return new NextRequest('http://localhost:3000/test', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(body),\n    })\n  }\n\n  describe('/api/drive/files/details', () => {\n    it('should handle single file details request', async () => {\n      mockRequest = createMockRequest({ fileId: 'test-file-id' })\n\n      const response = await POST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n      expect(data.operation).toBe('details')\n      expect(data.fileDetails).toBeDefined()\n    })\n\n    it('should return 400 for missing fileId', async () => {\n      mockRequest = createMockRequest({})\n\n      const response = await POST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(400)\n      expect(data.error).toBe('File ID is required')\n    })\n  })\n\n  describe('/api/drive/files/essential', () => {\n    it('should return essential metadata', async () => {\n      mockRequest = createMockRequest({ fileId: 'test-file-id' })\n\n      const response = await EssentialPOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n      expect(data.operation).toBe('essential')\n      expect(data.fileMetadata).toBeDefined()\n    })\n  })\n\n  describe('/api/drive/files/extended', () => {\n    it('should return extended metadata', async () => {\n      mockRequest = createMockRequest({ fileId: 'test-file-id' })\n\n      const response = await ExtendedPOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n      expect(data.operation).toBe('extended')\n      expect(data.fileMetadata).toBeDefined()\n    })\n  })\n\n  describe('/api/drive/files/move', () => {\n    it('should handle single file move', async () => {\n      mockRequest = createMockRequest({\n        fileId: 'test-file-id',\n        targetFolderId: 'target-folder-id',\n      })\n\n      const response = await MovePOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n      expect(data.operation).toBe('move')\n      expect(data.type).toBe('single')\n    })\n\n    it('should handle bulk file move', async () => {\n      mockRequest = createMockRequest({\n        items: [\n          { id: 'file1', name: 'file1.txt', isFolder: false },\n          { id: 'file2', name: 'file2.txt', isFolder: false },\n        ],\n        targetFolderId: 'target-folder-id',\n      })\n\n      const response = await MovePOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n      expect(data.operation).toBe('move')\n      expect(data.type).toBe('bulk')\n      expect(data.processed).toBe(2)\n    })\n\n    it('should return 400 for missing targetFolderId', async () => {\n      mockRequest = createMockRequest({ fileId: 'test-file-id' })\n\n      const response = await MovePOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(400)\n      expect(data.error).toBe('Target folder ID is required')\n    })\n  })\n\n  describe('/api/drive/files/copy', () => {\n    it('should handle file copy operation', async () => {\n      mockRequest = createMockRequest({\n        fileId: 'test-file-id',\n        targetFolderId: 'target-folder-id',\n      })\n\n      const response = await CopyPOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n      expect(data.operation).toBe('copy')\n      expect(data.targetFolderId).toBe('target-folder-id')\n    })\n\n    it('should handle bulk copy with name prefix', async () => {\n      mockRequest = createMockRequest({\n        items: [{ id: 'file1', name: 'file1.txt', isFolder: false }],\n        targetFolderId: 'target-folder-id',\n        namePrefix: 'Copy_',\n      })\n\n      const response = await CopyPOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.namePrefix).toBe('Copy_')\n    })\n  })\n\n  describe('/api/drive/files/rename', () => {\n    it('should handle single file rename', async () => {\n      mockRequest = createMockRequest({\n        fileId: 'test-file-id',\n        newName: 'new-file-name.txt',\n      })\n\n      const response = await RenamePOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n      expect(data.operation).toBe('rename')\n    })\n\n    it('should handle bulk rename with prefix', async () => {\n      mockRequest = createMockRequest({\n        items: [\n          { id: 'file1', name: 'file1.txt', isFolder: false },\n          { id: 'file2', name: 'file2.txt', isFolder: false },\n        ],\n        namePrefix: 'Bulk_',\n      })\n\n      const response = await RenamePOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.type).toBe('bulk')\n    })\n  })\n\n  describe('/api/drive/files/trash', () => {\n    it('should handle trash operation', async () => {\n      mockRequest = createMockRequest({\n        fileId: 'test-file-id',\n      })\n\n      const response = await TrashPOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n      expect(data.operation).toBe('trash')\n    })\n  })\n\n  describe('/api/drive/files/untrash', () => {\n    it('should handle untrash operation', async () => {\n      mockRequest = createMockRequest({\n        fileId: 'test-file-id',\n      })\n\n      const response = await UntrashPOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n      expect(data.operation).toBe('untrash')\n    })\n  })\n\n  describe('/api/drive/files/delete', () => {\n    it('should handle permanent delete operation', async () => {\n      mockRequest = createMockRequest({\n        fileId: 'test-file-id',\n      })\n\n      const response = await DeletePOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n      expect(data.operation).toBe('delete')\n    })\n  })\n\n  describe('/api/drive/files/share', () => {\n    it('should handle share operation', async () => {\n      mockRequest = createMockRequest({\n        fileId: 'test-file-id',\n        permissions: [{ type: 'user', role: 'reader', emailAddress: 'test@example.com' }],\n        notifyUsers: false,\n      })\n\n      const response = await SharePOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n      expect(data.operation).toBe('share')\n    })\n  })\n\n  describe('/api/drive/files/export', () => {\n    it('should handle export operation', async () => {\n      mockRequest = createMockRequest({\n        fileId: 'test-file-id',\n        exportFormat: 'pdf',\n      })\n\n      const response = await ExportPOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n      expect(data.operation).toBe('export')\n      expect(data.exportFormat).toBe('pdf')\n    })\n  })\n\n  describe('/api/drive/files/download', () => {\n    it('should handle single file download', async () => {\n      mockRequest = createMockRequest({\n        fileId: 'test-file-id',\n        downloadMode: 'exportLinks',\n      })\n\n      const response = await DownloadPOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n      expect(data.success).toBe(true)\n    })\n\n    it('should handle bulk download', async () => {\n      mockRequest = createMockRequest({\n        items: [{ id: 'file1', name: 'file1.txt', isFolder: false }],\n        downloadMode: 'exportLinks',\n      })\n\n      const response = await DownloadPOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(200)\n    })\n\n    it('should return error for missing fileId in single mode', async () => {\n      mockRequest = createMockRequest({\n        downloadMode: 'oneByOne',\n      })\n\n      const response = await DownloadPOST(mockRequest)\n      const data = await response.json()\n\n      expect(response.status).toBe(400)\n      expect(data.error).toBe('fileId is required for single file download')\n    })\n  })\n})\n\ndescribe('API Endpoints - Error Handling', () => {\n  beforeEach(() => {\n    jest.clearAllMocks()\n  })\n\n  it('should handle authentication failure', async () => {\n    // Mock authentication failure\n    const { initDriveService } = require('@/lib/api-utils')\n    initDriveService.mockResolvedValueOnce({\n      success: false,\n      response: new Response('Unauthorized', { status: 401 }),\n    })\n\n    const mockRequest = new NextRequest('http://localhost:3000/test', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ fileId: 'test-file-id' }),\n    })\n\n    const response = await POST(mockRequest)\n    expect(response.status).toBe(401)\n  })\n\n  it('should handle service errors gracefully', async () => {\n    // Mock service error\n    const { initDriveService } = require('@/lib/api-utils')\n    initDriveService.mockResolvedValueOnce({\n      success: true,\n      driveService: {\n        getFileDetails: jest.fn().mockRejectedValue(new Error('Service error')),\n      },\n    })\n\n    const mockRequest = new NextRequest('http://localhost:3000/test', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ fileId: 'test-file-id' }),\n    })\n\n    const response = await POST(mockRequest)\n    expect(response.status).toBe(500)\n  })\n})\n\ndescribe('API Endpoints - Request Validation', () => {\n  const createMockRequest = (body: any) => {\n    return new NextRequest('http://localhost:3000/test', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(body),\n    })\n  }\n\n  it('should validate required fields for each endpoint', async () => {\n    // Test missing fileId for details endpoint\n    const detailsRequest = createMockRequest({})\n    const detailsResponse = await POST(detailsRequest)\n    expect(detailsResponse.status).toBe(400)\n\n    // Test missing targetFolderId for move endpoint\n    const moveRequest = createMockRequest({ fileId: 'test' })\n    const moveResponse = await MovePOST(moveRequest)\n    expect(moveResponse.status).toBe(400)\n  })\n\n  it('should handle malformed JSON', async () => {\n    const malformedRequest = new NextRequest('http://localhost:3000/test', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: 'invalid-json',\n    })\n\n    try {\n      await POST(malformedRequest)\n    } catch (error) {\n      expect(error).toBeInstanceOf(Error)\n    }\n  })\n})\n"],"names":["jest","mock","default","fn","handlers","GET","POST","auth","signIn","signOut","GoogleDriveService","mockImplementation","getFileDetails","mockResolvedValue","id","name","mimeType","size","createdTime","modifiedTime","getFileMetadata","moveFile","success","copyFile","renameFile","moveToTrash","untrashFile","deleteFile","shareFile","exportFile","ArrayBuffer","downloadFile","initDriveService","driveService","handleApiError","mockReturnValue","Response","status","validateShareRequest","validateOperationsRequest","throttledDriveRequest","retryDriveApiCall","describe","mockRequest","beforeEach","clearAllMocks","createMockRequest","body","NextRequest","method","headers","JSON","stringify","it","fileId","response","data","json","expect","toBe","operation","fileDetails","toBeDefined","error","EssentialPOST","fileMetadata","ExtendedPOST","targetFolderId","MovePOST","type","items","isFolder","processed","CopyPOST","namePrefix","newName","RenamePOST","TrashPOST","UntrashPOST","DeletePOST","permissions","role","emailAddress","notifyUsers","SharePOST","exportFormat","ExportPOST","downloadMode","DownloadPOST","require","mockResolvedValueOnce","mockRejectedValue","Error","detailsRequest","detailsResponse","moveRequest","moveResponse","malformedRequest","toBeInstanceOf"],"mappings":"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"}