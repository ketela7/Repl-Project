{"version":3,"names":["cov_2eggaslvn3","actualCoverage","s","CreateFolderDialog","f","default","_default","isOpen","onClose","onFolderCreated","parentFolderId","folderName","setFolderName","_react","useState","creating","setCreating","actualParentId","handleCreate","trim","b","_sonner","toast","error","response","fetch","method","headers","body","JSON","stringify","name","parentId","ok","errorData","json","needsReauth","status","window","location","reload","Error","result","success","handleClose","process","env","NODE_ENV","message","_jsxruntime","jsx","_dialog","Dialog","open","onOpenChange","jsxs","DialogContent","className","DialogHeader","DialogTitle","DialogDescription","_label","Label","htmlFor","_input","Input","id","value","onChange","e","target","placeholder","disabled","onKeyDown","key","autoFocus","DialogFooter","_button","Button","variant","onClick","Fragment","_lucidereact","FolderPlus"],"sources":["/home/runner/workspace/src/app/(main)/dashboard/drive/_components/create-folder-dialog.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { FolderPlus } from 'lucide-react'\nimport { toast } from 'sonner'\n\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Label } from '@/components/ui/label'\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from '@/components/ui/dialog'\n\ninterface CreateFolderDialogProps {\n  isOpen: boolean\n  onClose: () => void\n  onFolderCreated: () => void\n  parentFolderId?: string | null\n  currentFolderId?: string | null\n}\n\nexport function CreateFolderDialog({ isOpen, onClose, onFolderCreated, parentFolderId }: CreateFolderDialogProps) {\n  const [folderName, setFolderName] = useState('')\n  const [creating, setCreating] = useState(false)\n  // Rename parentFolderId to actualParentId to be used in the API call\n  const actualParentId = parentFolderId\n\n  const handleCreate = async () => {\n    if (!(folderName as string).trim()) {\n      toast.error('Please enter a folder name')\n      return\n    }\n\n    try {\n      setCreating(true)\n\n      const response = await fetch('/api/drive/folders', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          name: (folderName as string).trim(),\n          parentId: actualParentId,\n        }),\n      })\n\n      if (!response.ok) {\n        const errorData = await response.json()\n\n        // Handle reauthentication needed\n        if (errorData.needsReauth || response.status === 401 || response.status === 403) {\n          toast.error(errorData.error || 'Google Drive access expired. Please reconnect your account.')\n          // Trigger parent component to show connection card\n          window.location.reload()\n          return\n        }\n\n        throw new Error(errorData.error || 'Failed to create folder')\n      }\n\n      const result = await response.json()\n\n      toast.success(`Folder \"${result.name}\" created successfully`)\n      onFolderCreated()\n      handleClose()\n    } catch (error) {\n      // Log error for debugging in development only\n      if (process.env.NODE_ENV === 'development') {\n      }\n      toast.error(error instanceof Error ? error.message : 'Failed to create folder')\n    } finally {\n      setCreating(false)\n    }\n  }\n\n  const handleClose = () => {\n    if (!creating) {\n      setFolderName('')\n      onClose()\n    }\n  }\n\n  return (\n    <Dialog open={isOpen} onOpenChange={handleClose}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <DialogTitle>Create New Folder</DialogTitle>\n          <DialogDescription>\n            Create a new folder\n            {parentFolderId && ' in the current location'}\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"folder-name\">Folder Name</Label>\n            <Input\n              id=\"folder-name\"\n              value={folderName}\n              onChange={e => setFolderName(e.target.value)}\n              placeholder=\"Enter folder name...\"\n              disabled={creating}\n              onKeyDown={e => {\n                if (e.key === 'Enter') {\n                  handleCreate()\n                }\n              }}\n              autoFocus\n            />\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={handleClose} disabled={creating}>\n            Cancel\n          </Button>\n          <Button onClick={handleCreate} disabled={!(folderName as string).trim() || creating}>\n            {creating ? (\n              <>\n                <FolderPlus className=\"mr-2 h-4 w-4 animate-pulse\" />\n                Creating...\n              </>\n            ) : (\n              <>\n                <FolderPlus className=\"mr-2 h-4 w-4\" />\n                Create Folder\n              </>\n            )}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nexport default CreateFolderDialog\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}