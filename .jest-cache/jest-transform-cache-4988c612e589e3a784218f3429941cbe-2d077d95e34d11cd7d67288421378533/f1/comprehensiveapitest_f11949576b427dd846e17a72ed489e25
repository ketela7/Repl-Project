c65da782641322bb3abe629199d62ab0
/**
 * Comprehensive API Testing Suite
 * Tests all Google Drive API endpoints with real session cookies
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
const _testsetup = /*#__PURE__*/ _interop_require_default(require("./test-setup"));
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
// Test configuration
const testConfig = {
    baseUrl: 'http://localhost:5000',
    sessionCookie: '',
    testTimeout: 30000,
    retryAttempts: 3
};
/**
 * Extended API Tester with comprehensive endpoint coverage
 */ class ComprehensiveAPITester extends _testsetup.default {
    /**
   * Test all authentication endpoints
   */ async testAuthEndpoints() {
        console.log('\nüîê Testing Authentication Endpoints...');
        const authTests = [];
        authTests.push(await this.apiRequest('/api/auth/session', 'GET'));
        authTests.push(await this.apiRequest('/api/auth/providers', 'GET'));
        return authTests;
    }
    /**
   * Test complete Files API with all parameters
   */ async testCompleteFilesAPI() {
        console.log('\nüìÅ Testing Complete Files API...');
        const filesTests = [];
        // Basic file listing with various parameters
        filesTests.push(await this.apiRequest('/api/drive/files', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?pageSize=10', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?pageSize=50', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?pageSize=100', 'GET'));
        // Sorting variations
        filesTests.push(await this.apiRequest('/api/drive/files?sortBy=name&sortOrder=asc', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?sortBy=name&sortOrder=desc', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?sortBy=modified&sortOrder=asc', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?sortBy=modified&sortOrder=desc', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?sortBy=created&sortOrder=asc', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?sortBy=size&sortOrder=desc', 'GET'));
        // View status filters
        filesTests.push(await this.apiRequest('/api/drive/files?viewStatus=all', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?viewStatus=my-drive', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?viewStatus=shared', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?viewStatus=starred', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?viewStatus=trash', 'GET'));
        // File type filters
        filesTests.push(await this.apiRequest('/api/drive/files?fileType=folder', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?fileType=document', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?fileType=image', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?fileType=video', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?fileType=audio', 'GET'));
        // Search queries
        filesTests.push(await this.apiRequest('/api/drive/files?q=type:video', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?q=type:folder', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?search=mp4', 'GET'));
        // Folder navigation (using real folder IDs from Drive)
        filesTests.push(await this.apiRequest('/api/drive/files?folderId=149athC5H8cmh0QJq6xHu-cbFyS9J6fk-', 'GET'));
        filesTests.push(await this.apiRequest('/api/drive/files?folderId=1r-sGh52GdpwLYGvay85I999Wekr5XqVh', 'GET'));
        return filesTests;
    }
    /**
   * Test individual file detail endpoints
   */ async testFileDetailEndpoints() {
        console.log('\nüìÑ Testing File Detail Endpoints...');
        const detailTests = [];
        // Using real file IDs from your Drive
        const testFiles = [
            '1q5xt1XgsroFmbYL1HWO1q3DzVvynDU0B',
            '149athC5H8cmh0QJq6xHu-cbFyS9J6fk-',
            '1r-sGh52GdpwLYGvay85I999Wekr5XqVh'
        ];
        for (const fileId of testFiles){
            // Full file details
            detailTests.push(await this.apiRequest(`/api/drive/files/${fileId}`, 'GET'));
            // Progressive loading endpoints
            detailTests.push(await this.apiRequest(`/api/drive/files/${fileId}/essential`, 'GET'));
            detailTests.push(await this.apiRequest(`/api/drive/files/${fileId}/extended`, 'GET'));
        }
        return detailTests;
    }
    /**
   * Test all bulk operation endpoints (safe operations only)
   */ async testBulkOperationEndpoints() {
        console.log('\nüîÑ Testing Bulk Operation Endpoints...');
        const bulkTests = [];
        const testItems = [
            {
                id: '1q5xt1XgsroFmbYL1HWO1q3DzVvynDU0B',
                name: 'test-video.mp4',
                isFolder: false
            },
            {
                id: '149athC5H8cmh0QJq6xHu-cbFyS9J6fk-',
                name: 'test-folder',
                isFolder: true
            }
        ];
        // Download operations (safe, read-only)
        bulkTests.push(await this.apiRequest('/api/drive/files/bulk/download', 'POST', {
            items: testItems,
            mode: 'export-links'
        }));
        // Test individual operation endpoints (without actually performing destructive operations)
        const fileId = testItems[0].id;
        // These endpoints should be tested with GET requests to check availability
        bulkTests.push(await this.apiRequest(`/api/drive/files/${fileId}/move`, 'GET'));
        bulkTests.push(await this.apiRequest(`/api/drive/files/${fileId}/copy`, 'GET'));
        bulkTests.push(await this.apiRequest(`/api/drive/files/${fileId}/trash`, 'GET'));
        bulkTests.push(await this.apiRequest(`/api/drive/files/${fileId}/share`, 'GET'));
        bulkTests.push(await this.apiRequest(`/api/drive/files/${fileId}/rename`, 'GET'));
        bulkTests.push(await this.apiRequest(`/api/drive/files/${fileId}/download`, 'GET'));
        return bulkTests;
    }
    /**
   * Test performance and monitoring endpoints
   */ async testPerformanceEndpoints() {
        console.log('\n‚ö° Testing Performance Endpoints...');
        const perfTests = [];
        perfTests.push(await this.apiRequest('/api/health', 'GET'));
        perfTests.push(await this.apiRequest('/api/drive/performance', 'GET'));
        // Cache management endpoints
        perfTests.push(await this.apiRequest('/api/cache/clear', 'POST'));
        return perfTests;
    }
    /**
   * Test error handling and edge cases
   */ async testErrorHandling() {
        console.log('\n‚ùå Testing Error Handling...');
        const errorTests = [];
        // Test with invalid file IDs
        errorTests.push(await this.apiRequest('/api/drive/files/invalid-file-id', 'GET'));
        errorTests.push(await this.apiRequest('/api/drive/files/invalid-file-id/essential', 'GET'));
        // Test with invalid parameters
        errorTests.push(await this.apiRequest('/api/drive/files?pageSize=invalid', 'GET'));
        errorTests.push(await this.apiRequest('/api/drive/files?sortBy=invalid', 'GET'));
        errorTests.push(await this.apiRequest('/api/drive/files?viewStatus=invalid', 'GET'));
        // Test with invalid folder IDs
        errorTests.push(await this.apiRequest('/api/drive/files?folderId=invalid-folder', 'GET'));
        return errorTests;
    }
    /**
   * Test rate limiting and concurrent requests
   */ async testConcurrentRequests() {
        console.log('\nüöÄ Testing Concurrent Requests...');
        const concurrentTests = [];
        // Create multiple concurrent requests
        const concurrentPromises = [];
        for(let i = 0; i < 5; i++){
            concurrentPromises.push(this.apiRequest('/api/drive/files?pageSize=10', 'GET'));
        }
        const results = await Promise.all(concurrentPromises);
        concurrentTests.push(...results);
        return concurrentTests;
    }
    /**
   * Run complete comprehensive test suite
   */ async runComprehensiveTests() {
        console.log('üß™ Starting Comprehensive API Testing Suite...');
        console.log('üéØ Target: All Google Drive Pro API endpoints');
        console.log('üìß Using real session with Drive access');
        const startTime = Date.now();
        try {
            // Validate session first
            const session = await this.validateSession();
            if (!session) {
                throw new Error('Session validation failed - cannot proceed with testing');
            }
            console.log(`‚úÖ Session validated for: ${session.email}`);
            // Run all test suites
            const allTests = [
                ...await this.testAuthEndpoints(),
                ...await this.testCompleteFilesAPI(),
                ...await this.testFileDetailEndpoints(),
                ...await this.testBulkOperationEndpoints(),
                ...await this.testPerformanceEndpoints(),
                ...await this.testErrorHandling(),
                ...await this.testConcurrentRequests()
            ];
            const totalTime = Date.now() - startTime;
            // Calculate comprehensive statistics
            const passed = allTests.filter((t)=>t.success).length;
            const failed = allTests.length - passed;
            const responseTimes = allTests.map((t)=>t.responseTime);
            const averageResponseTime = responseTimes.reduce((a, b)=>a + b, 0) / responseTimes.length;
            // Group results by endpoint category
            const categoryStats = this.categorizeResults(allTests);
            // Performance analysis
            const slowest = allTests.reduce((prev, curr)=>prev.responseTime > curr.responseTime ? prev : curr);
            const fastest = allTests.reduce((prev, curr)=>prev.responseTime < curr.responseTime ? prev : curr);
            const summary = {
                totalTests: allTests.length,
                passed,
                failed,
                successRate: Math.round(passed / allTests.length * 100),
                totalTime: Math.round(totalTime / 1000),
                performance: {
                    averageResponseTime: Math.round(averageResponseTime),
                    slowestEndpoint: `${slowest.endpoint} (${slowest.responseTime}ms)`,
                    fastestEndpoint: `${fastest.endpoint} (${fastest.responseTime}ms)`
                },
                categoryStats,
                results: allTests
            };
            this.printComprehensiveSummary(summary);
            return summary;
        } catch (error) {
            console.error('‚ùå Comprehensive testing failed:', error);
            throw error;
        }
    }
    /**
   * Categorize test results by endpoint type
   */ categorizeResults(results) {
        const categories = {
            auth: {
                total: 0,
                passed: 0,
                avgTime: 0
            },
            files: {
                total: 0,
                passed: 0,
                avgTime: 0
            },
            details: {
                total: 0,
                passed: 0,
                avgTime: 0
            },
            bulk: {
                total: 0,
                passed: 0,
                avgTime: 0
            },
            performance: {
                total: 0,
                passed: 0,
                avgTime: 0
            },
            errors: {
                total: 0,
                passed: 0,
                avgTime: 0
            }
        };
        results.forEach((result)=>{
            let category = 'files' // default
            ;
            if (result.endpoint.includes('/auth/')) category = 'auth';
            else if (result.endpoint.includes('/bulk/') || result.endpoint.includes('/move') || result.endpoint.includes('/copy') || result.endpoint.includes('/trash')) category = 'bulk';
            else if (result.endpoint.includes('/essential') || result.endpoint.includes('/extended')) category = 'details';
            else if (result.endpoint.includes('/health') || result.endpoint.includes('/performance') || result.endpoint.includes('/cache')) category = 'performance';
            else if (result.endpoint.includes('invalid')) category = 'errors';
            categories[category].total++;
            if (result.success) categories[category].passed++;
            categories[category].avgTime += result.responseTime;
        });
        // Calculate averages
        Object.keys(categories).forEach((cat)=>{
            const category = categories[cat];
            if (category.total > 0) {
                category.avgTime = Math.round(category.avgTime / category.total);
                category.successRate = Math.round(category.passed / category.total * 100);
            }
        });
        return categories;
    }
    /**
   * Print comprehensive test summary
   */ printComprehensiveSummary(summary) {
        console.log('\n' + '='.repeat(60));
        console.log('üìä COMPREHENSIVE API TEST SUMMARY');
        console.log('='.repeat(60));
        console.log(`üß™ Total Tests: ${summary.totalTests}`);
        console.log(`‚úÖ Passed: ${summary.passed}`);
        console.log(`‚ùå Failed: ${summary.failed}`);
        console.log(`üìà Success Rate: ${summary.successRate}%`);
        console.log(`‚è±Ô∏è  Total Time: ${summary.totalTime}s`);
        console.log('\nüìà Performance Metrics:');
        console.log(`   Average Response Time: ${summary.performance.averageResponseTime}ms`);
        console.log(`   Slowest: ${summary.performance.slowestEndpoint}`);
        console.log(`   Fastest: ${summary.performance.fastestEndpoint}`);
        console.log('\nüìÇ Category Breakdown:');
        Object.entries(summary.categoryStats).forEach(([category, stats])=>{
            if (stats.total > 0) {
                console.log(`   ${category.toUpperCase()}: ${stats.passed}/${stats.total} (${stats.successRate}%) - Avg: ${stats.avgTime}ms`);
            }
        });
        console.log('\n' + '='.repeat(60));
    }
}
const _default = ComprehensiveAPITester;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvX190ZXN0c19fL2FwaS9jb21wcmVoZW5zaXZlLWFwaS10ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29tcHJlaGVuc2l2ZSBBUEkgVGVzdGluZyBTdWl0ZVxuICogVGVzdHMgYWxsIEdvb2dsZSBEcml2ZSBBUEkgZW5kcG9pbnRzIHdpdGggcmVhbCBzZXNzaW9uIGNvb2tpZXNcbiAqL1xuXG5pbXBvcnQgQVBJVGVzdGVyLCB7IFRlc3RDb25maWcgfSBmcm9tICcuL3Rlc3Qtc2V0dXAnXG5cbi8vIFRlc3QgY29uZmlndXJhdGlvblxuY29uc3QgdGVzdENvbmZpZzogVGVzdENvbmZpZyA9IHtcbiAgYmFzZVVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMCcsXG4gIHNlc3Npb25Db29raWU6ICcnLCAvLyBXaWxsIGJlIGV4dHJhY3RlZCBmcm9tIGJyb3dzZXJcbiAgdGVzdFRpbWVvdXQ6IDMwMDAwLFxuICByZXRyeUF0dGVtcHRzOiAzLFxufVxuXG4vKipcbiAqIEV4dGVuZGVkIEFQSSBUZXN0ZXIgd2l0aCBjb21wcmVoZW5zaXZlIGVuZHBvaW50IGNvdmVyYWdlXG4gKi9cbmNsYXNzIENvbXByZWhlbnNpdmVBUElUZXN0ZXIgZXh0ZW5kcyBBUElUZXN0ZXIge1xuICAvKipcbiAgICogVGVzdCBhbGwgYXV0aGVudGljYXRpb24gZW5kcG9pbnRzXG4gICAqL1xuICBhc3luYyB0ZXN0QXV0aEVuZHBvaW50cygpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgY29uc29sZS5sb2coJ1xcbvCflJAgVGVzdGluZyBBdXRoZW50aWNhdGlvbiBFbmRwb2ludHMuLi4nKVxuICAgIGNvbnN0IGF1dGhUZXN0cyA9IFtdXG5cbiAgICBhdXRoVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvYXV0aC9zZXNzaW9uJywgJ0dFVCcpKVxuICAgIGF1dGhUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdCgnL2FwaS9hdXRoL3Byb3ZpZGVycycsICdHRVQnKSlcblxuICAgIHJldHVybiBhdXRoVGVzdHNcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGNvbXBsZXRlIEZpbGVzIEFQSSB3aXRoIGFsbCBwYXJhbWV0ZXJzXG4gICAqL1xuICBhc3luYyB0ZXN0Q29tcGxldGVGaWxlc0FQSSgpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgY29uc29sZS5sb2coJ1xcbvCfk4EgVGVzdGluZyBDb21wbGV0ZSBGaWxlcyBBUEkuLi4nKVxuICAgIGNvbnN0IGZpbGVzVGVzdHMgPSBbXVxuXG4gICAgLy8gQmFzaWMgZmlsZSBsaXN0aW5nIHdpdGggdmFyaW91cyBwYXJhbWV0ZXJzXG4gICAgZmlsZXNUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdCgnL2FwaS9kcml2ZS9maWxlcycsICdHRVQnKSlcbiAgICBmaWxlc1Rlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP3BhZ2VTaXplPTEwJywgJ0dFVCcpKVxuICAgIGZpbGVzVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvZHJpdmUvZmlsZXM/cGFnZVNpemU9NTAnLCAnR0VUJykpXG4gICAgZmlsZXNUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdCgnL2FwaS9kcml2ZS9maWxlcz9wYWdlU2l6ZT0xMDAnLCAnR0VUJykpXG5cbiAgICAvLyBTb3J0aW5nIHZhcmlhdGlvbnNcbiAgICBmaWxlc1Rlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP3NvcnRCeT1uYW1lJnNvcnRPcmRlcj1hc2MnLCAnR0VUJykpXG4gICAgZmlsZXNUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdCgnL2FwaS9kcml2ZS9maWxlcz9zb3J0Qnk9bmFtZSZzb3J0T3JkZXI9ZGVzYycsICdHRVQnKSlcbiAgICBmaWxlc1Rlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP3NvcnRCeT1tb2RpZmllZCZzb3J0T3JkZXI9YXNjJywgJ0dFVCcpKVxuICAgIGZpbGVzVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvZHJpdmUvZmlsZXM/c29ydEJ5PW1vZGlmaWVkJnNvcnRPcmRlcj1kZXNjJywgJ0dFVCcpKVxuICAgIGZpbGVzVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvZHJpdmUvZmlsZXM/c29ydEJ5PWNyZWF0ZWQmc29ydE9yZGVyPWFzYycsICdHRVQnKSlcbiAgICBmaWxlc1Rlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP3NvcnRCeT1zaXplJnNvcnRPcmRlcj1kZXNjJywgJ0dFVCcpKVxuXG4gICAgLy8gVmlldyBzdGF0dXMgZmlsdGVyc1xuICAgIGZpbGVzVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvZHJpdmUvZmlsZXM/dmlld1N0YXR1cz1hbGwnLCAnR0VUJykpXG4gICAgZmlsZXNUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdCgnL2FwaS9kcml2ZS9maWxlcz92aWV3U3RhdHVzPW15LWRyaXZlJywgJ0dFVCcpKVxuICAgIGZpbGVzVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvZHJpdmUvZmlsZXM/dmlld1N0YXR1cz1zaGFyZWQnLCAnR0VUJykpXG4gICAgZmlsZXNUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdCgnL2FwaS9kcml2ZS9maWxlcz92aWV3U3RhdHVzPXN0YXJyZWQnLCAnR0VUJykpXG4gICAgZmlsZXNUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdCgnL2FwaS9kcml2ZS9maWxlcz92aWV3U3RhdHVzPXRyYXNoJywgJ0dFVCcpKVxuXG4gICAgLy8gRmlsZSB0eXBlIGZpbHRlcnNcbiAgICBmaWxlc1Rlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP2ZpbGVUeXBlPWZvbGRlcicsICdHRVQnKSlcbiAgICBmaWxlc1Rlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP2ZpbGVUeXBlPWRvY3VtZW50JywgJ0dFVCcpKVxuICAgIGZpbGVzVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvZHJpdmUvZmlsZXM/ZmlsZVR5cGU9aW1hZ2UnLCAnR0VUJykpXG4gICAgZmlsZXNUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdCgnL2FwaS9kcml2ZS9maWxlcz9maWxlVHlwZT12aWRlbycsICdHRVQnKSlcbiAgICBmaWxlc1Rlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP2ZpbGVUeXBlPWF1ZGlvJywgJ0dFVCcpKVxuXG4gICAgLy8gU2VhcmNoIHF1ZXJpZXNcbiAgICBmaWxlc1Rlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP3E9dHlwZTp2aWRlbycsICdHRVQnKSlcbiAgICBmaWxlc1Rlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP3E9dHlwZTpmb2xkZXInLCAnR0VUJykpXG4gICAgZmlsZXNUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdCgnL2FwaS9kcml2ZS9maWxlcz9zZWFyY2g9bXA0JywgJ0dFVCcpKVxuXG4gICAgLy8gRm9sZGVyIG5hdmlnYXRpb24gKHVzaW5nIHJlYWwgZm9sZGVyIElEcyBmcm9tIERyaXZlKVxuICAgIGZpbGVzVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvZHJpdmUvZmlsZXM/Zm9sZGVySWQ9MTQ5YXRoQzVIOGNtaDBRSnE2eEh1LWNiRnlTOUo2ZmstJywgJ0dFVCcpKVxuICAgIGZpbGVzVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvZHJpdmUvZmlsZXM/Zm9sZGVySWQ9MXItc0doNTJHZHB3TFlHdmF5ODVJOTk5V2VrcjVYcVZoJywgJ0dFVCcpKVxuXG4gICAgcmV0dXJuIGZpbGVzVGVzdHNcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGluZGl2aWR1YWwgZmlsZSBkZXRhaWwgZW5kcG9pbnRzXG4gICAqL1xuICBhc3luYyB0ZXN0RmlsZURldGFpbEVuZHBvaW50cygpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgY29uc29sZS5sb2coJ1xcbvCfk4QgVGVzdGluZyBGaWxlIERldGFpbCBFbmRwb2ludHMuLi4nKVxuICAgIGNvbnN0IGRldGFpbFRlc3RzID0gW11cblxuICAgIC8vIFVzaW5nIHJlYWwgZmlsZSBJRHMgZnJvbSB5b3VyIERyaXZlXG4gICAgY29uc3QgdGVzdEZpbGVzID0gW1xuICAgICAgJzFxNXh0MVhnc3JvRm1iWUwxSFdPMXEzRHpWdnluRFUwQicsIC8vIFZpZGVvIGZpbGVcbiAgICAgICcxNDlhdGhDNUg4Y21oMFFKcTZ4SHUtY2JGeVM5SjZmay0nLCAvLyBGb2xkZXIgXCIwMFwiXG4gICAgICAnMXItc0doNTJHZHB3TFlHdmF5ODVJOTk5V2VrcjVYcVZoJywgLy8gQW5vdGhlciBmb2xkZXJcbiAgICBdXG5cbiAgICBmb3IgKGNvbnN0IGZpbGVJZCBvZiB0ZXN0RmlsZXMpIHtcbiAgICAgIC8vIEZ1bGwgZmlsZSBkZXRhaWxzXG4gICAgICBkZXRhaWxUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdChgL2FwaS9kcml2ZS9maWxlcy8ke2ZpbGVJZH1gLCAnR0VUJykpXG5cbiAgICAgIC8vIFByb2dyZXNzaXZlIGxvYWRpbmcgZW5kcG9pbnRzXG4gICAgICBkZXRhaWxUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdChgL2FwaS9kcml2ZS9maWxlcy8ke2ZpbGVJZH0vZXNzZW50aWFsYCwgJ0dFVCcpKVxuICAgICAgZGV0YWlsVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoYC9hcGkvZHJpdmUvZmlsZXMvJHtmaWxlSWR9L2V4dGVuZGVkYCwgJ0dFVCcpKVxuICAgIH1cblxuICAgIHJldHVybiBkZXRhaWxUZXN0c1xuICB9XG5cbiAgLyoqXG4gICAqIFRlc3QgYWxsIGJ1bGsgb3BlcmF0aW9uIGVuZHBvaW50cyAoc2FmZSBvcGVyYXRpb25zIG9ubHkpXG4gICAqL1xuICBhc3luYyB0ZXN0QnVsa09wZXJhdGlvbkVuZHBvaW50cygpOiBQcm9taXNlPGFueVtdPiB7XG4gICAgY29uc29sZS5sb2coJ1xcbvCflIQgVGVzdGluZyBCdWxrIE9wZXJhdGlvbiBFbmRwb2ludHMuLi4nKVxuICAgIGNvbnN0IGJ1bGtUZXN0cyA9IFtdXG5cbiAgICBjb25zdCB0ZXN0SXRlbXMgPSBbXG4gICAgICB7IGlkOiAnMXE1eHQxWGdzcm9GbWJZTDFIV08xcTNEelZ2eW5EVTBCJywgbmFtZTogJ3Rlc3QtdmlkZW8ubXA0JywgaXNGb2xkZXI6IGZhbHNlIH0sXG4gICAgICB7IGlkOiAnMTQ5YXRoQzVIOGNtaDBRSnE2eEh1LWNiRnlTOUo2ZmstJywgbmFtZTogJ3Rlc3QtZm9sZGVyJywgaXNGb2xkZXI6IHRydWUgfSxcbiAgICBdXG5cbiAgICAvLyBEb3dubG9hZCBvcGVyYXRpb25zIChzYWZlLCByZWFkLW9ubHkpXG4gICAgYnVsa1Rlc3RzLnB1c2goXG4gICAgICBhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvZHJpdmUvZmlsZXMvYnVsay9kb3dubG9hZCcsICdQT1NUJywge1xuICAgICAgICBpdGVtczogdGVzdEl0ZW1zLFxuICAgICAgICBtb2RlOiAnZXhwb3J0LWxpbmtzJyxcbiAgICAgIH0pXG4gICAgKVxuXG4gICAgLy8gVGVzdCBpbmRpdmlkdWFsIG9wZXJhdGlvbiBlbmRwb2ludHMgKHdpdGhvdXQgYWN0dWFsbHkgcGVyZm9ybWluZyBkZXN0cnVjdGl2ZSBvcGVyYXRpb25zKVxuICAgIGNvbnN0IGZpbGVJZCA9IHRlc3RJdGVtc1swXS5pZFxuXG4gICAgLy8gVGhlc2UgZW5kcG9pbnRzIHNob3VsZCBiZSB0ZXN0ZWQgd2l0aCBHRVQgcmVxdWVzdHMgdG8gY2hlY2sgYXZhaWxhYmlsaXR5XG4gICAgYnVsa1Rlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KGAvYXBpL2RyaXZlL2ZpbGVzLyR7ZmlsZUlkfS9tb3ZlYCwgJ0dFVCcpKVxuICAgIGJ1bGtUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdChgL2FwaS9kcml2ZS9maWxlcy8ke2ZpbGVJZH0vY29weWAsICdHRVQnKSlcbiAgICBidWxrVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoYC9hcGkvZHJpdmUvZmlsZXMvJHtmaWxlSWR9L3RyYXNoYCwgJ0dFVCcpKVxuICAgIGJ1bGtUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdChgL2FwaS9kcml2ZS9maWxlcy8ke2ZpbGVJZH0vc2hhcmVgLCAnR0VUJykpXG4gICAgYnVsa1Rlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KGAvYXBpL2RyaXZlL2ZpbGVzLyR7ZmlsZUlkfS9yZW5hbWVgLCAnR0VUJykpXG4gICAgYnVsa1Rlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KGAvYXBpL2RyaXZlL2ZpbGVzLyR7ZmlsZUlkfS9kb3dubG9hZGAsICdHRVQnKSlcblxuICAgIHJldHVybiBidWxrVGVzdHNcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IHBlcmZvcm1hbmNlIGFuZCBtb25pdG9yaW5nIGVuZHBvaW50c1xuICAgKi9cbiAgYXN5bmMgdGVzdFBlcmZvcm1hbmNlRW5kcG9pbnRzKCk6IFByb21pc2U8YW55W10+IHtcbiAgICBjb25zb2xlLmxvZygnXFxu4pqhIFRlc3RpbmcgUGVyZm9ybWFuY2UgRW5kcG9pbnRzLi4uJylcbiAgICBjb25zdCBwZXJmVGVzdHMgPSBbXVxuXG4gICAgcGVyZlRlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2hlYWx0aCcsICdHRVQnKSlcbiAgICBwZXJmVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvZHJpdmUvcGVyZm9ybWFuY2UnLCAnR0VUJykpXG5cbiAgICAvLyBDYWNoZSBtYW5hZ2VtZW50IGVuZHBvaW50c1xuICAgIHBlcmZUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdCgnL2FwaS9jYWNoZS9jbGVhcicsICdQT1NUJykpXG5cbiAgICByZXR1cm4gcGVyZlRlc3RzXG4gIH1cblxuICAvKipcbiAgICogVGVzdCBlcnJvciBoYW5kbGluZyBhbmQgZWRnZSBjYXNlc1xuICAgKi9cbiAgYXN5bmMgdGVzdEVycm9ySGFuZGxpbmcoKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIGNvbnNvbGUubG9nKCdcXG7inYwgVGVzdGluZyBFcnJvciBIYW5kbGluZy4uLicpXG4gICAgY29uc3QgZXJyb3JUZXN0cyA9IFtdXG5cbiAgICAvLyBUZXN0IHdpdGggaW52YWxpZCBmaWxlIElEc1xuICAgIGVycm9yVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvZHJpdmUvZmlsZXMvaW52YWxpZC1maWxlLWlkJywgJ0dFVCcpKVxuICAgIGVycm9yVGVzdHMucHVzaChhd2FpdCB0aGlzLmFwaVJlcXVlc3QoJy9hcGkvZHJpdmUvZmlsZXMvaW52YWxpZC1maWxlLWlkL2Vzc2VudGlhbCcsICdHRVQnKSlcblxuICAgIC8vIFRlc3Qgd2l0aCBpbnZhbGlkIHBhcmFtZXRlcnNcbiAgICBlcnJvclRlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP3BhZ2VTaXplPWludmFsaWQnLCAnR0VUJykpXG4gICAgZXJyb3JUZXN0cy5wdXNoKGF3YWl0IHRoaXMuYXBpUmVxdWVzdCgnL2FwaS9kcml2ZS9maWxlcz9zb3J0Qnk9aW52YWxpZCcsICdHRVQnKSlcbiAgICBlcnJvclRlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP3ZpZXdTdGF0dXM9aW52YWxpZCcsICdHRVQnKSlcblxuICAgIC8vIFRlc3Qgd2l0aCBpbnZhbGlkIGZvbGRlciBJRHNcbiAgICBlcnJvclRlc3RzLnB1c2goYXdhaXQgdGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP2ZvbGRlcklkPWludmFsaWQtZm9sZGVyJywgJ0dFVCcpKVxuXG4gICAgcmV0dXJuIGVycm9yVGVzdHNcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IHJhdGUgbGltaXRpbmcgYW5kIGNvbmN1cnJlbnQgcmVxdWVzdHNcbiAgICovXG4gIGFzeW5jIHRlc3RDb25jdXJyZW50UmVxdWVzdHMoKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIGNvbnNvbGUubG9nKCdcXG7wn5qAIFRlc3RpbmcgQ29uY3VycmVudCBSZXF1ZXN0cy4uLicpXG4gICAgY29uc3QgY29uY3VycmVudFRlc3RzID0gW11cblxuICAgIC8vIENyZWF0ZSBtdWx0aXBsZSBjb25jdXJyZW50IHJlcXVlc3RzXG4gICAgY29uc3QgY29uY3VycmVudFByb21pc2VzID0gW11cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgY29uY3VycmVudFByb21pc2VzLnB1c2godGhpcy5hcGlSZXF1ZXN0KCcvYXBpL2RyaXZlL2ZpbGVzP3BhZ2VTaXplPTEwJywgJ0dFVCcpKVxuICAgIH1cblxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbChjb25jdXJyZW50UHJvbWlzZXMpXG4gICAgY29uY3VycmVudFRlc3RzLnB1c2goLi4ucmVzdWx0cylcblxuICAgIHJldHVybiBjb25jdXJyZW50VGVzdHNcbiAgfVxuXG4gIC8qKlxuICAgKiBSdW4gY29tcGxldGUgY29tcHJlaGVuc2l2ZSB0ZXN0IHN1aXRlXG4gICAqL1xuICBhc3luYyBydW5Db21wcmVoZW5zaXZlVGVzdHMoKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zb2xlLmxvZygn8J+nqiBTdGFydGluZyBDb21wcmVoZW5zaXZlIEFQSSBUZXN0aW5nIFN1aXRlLi4uJylcbiAgICBjb25zb2xlLmxvZygn8J+OryBUYXJnZXQ6IEFsbCBHb29nbGUgRHJpdmUgUHJvIEFQSSBlbmRwb2ludHMnKVxuICAgIGNvbnNvbGUubG9nKCfwn5OnIFVzaW5nIHJlYWwgc2Vzc2lvbiB3aXRoIERyaXZlIGFjY2VzcycpXG5cbiAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpXG5cbiAgICB0cnkge1xuICAgICAgLy8gVmFsaWRhdGUgc2Vzc2lvbiBmaXJzdFxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHRoaXMudmFsaWRhdGVTZXNzaW9uKClcbiAgICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Nlc3Npb24gdmFsaWRhdGlvbiBmYWlsZWQgLSBjYW5ub3QgcHJvY2VlZCB3aXRoIHRlc3RpbmcnKVxuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhg4pyFIFNlc3Npb24gdmFsaWRhdGVkIGZvcjogJHtzZXNzaW9uLmVtYWlsfWApXG5cbiAgICAgIC8vIFJ1biBhbGwgdGVzdCBzdWl0ZXNcbiAgICAgIGNvbnN0IGFsbFRlc3RzID0gW1xuICAgICAgICAuLi4oYXdhaXQgdGhpcy50ZXN0QXV0aEVuZHBvaW50cygpKSxcbiAgICAgICAgLi4uKGF3YWl0IHRoaXMudGVzdENvbXBsZXRlRmlsZXNBUEkoKSksXG4gICAgICAgIC4uLihhd2FpdCB0aGlzLnRlc3RGaWxlRGV0YWlsRW5kcG9pbnRzKCkpLFxuICAgICAgICAuLi4oYXdhaXQgdGhpcy50ZXN0QnVsa09wZXJhdGlvbkVuZHBvaW50cygpKSxcbiAgICAgICAgLi4uKGF3YWl0IHRoaXMudGVzdFBlcmZvcm1hbmNlRW5kcG9pbnRzKCkpLFxuICAgICAgICAuLi4oYXdhaXQgdGhpcy50ZXN0RXJyb3JIYW5kbGluZygpKSxcbiAgICAgICAgLi4uKGF3YWl0IHRoaXMudGVzdENvbmN1cnJlbnRSZXF1ZXN0cygpKSxcbiAgICAgIF1cblxuICAgICAgY29uc3QgdG90YWxUaW1lID0gRGF0ZS5ub3coKSAtIHN0YXJ0VGltZVxuXG4gICAgICAvLyBDYWxjdWxhdGUgY29tcHJlaGVuc2l2ZSBzdGF0aXN0aWNzXG4gICAgICBjb25zdCBwYXNzZWQgPSBhbGxUZXN0cy5maWx0ZXIoKHQpID0+IHQuc3VjY2VzcykubGVuZ3RoXG4gICAgICBjb25zdCBmYWlsZWQgPSBhbGxUZXN0cy5sZW5ndGggLSBwYXNzZWRcbiAgICAgIGNvbnN0IHJlc3BvbnNlVGltZXMgPSBhbGxUZXN0cy5tYXAoKHQpID0+IHQucmVzcG9uc2VUaW1lKVxuICAgICAgY29uc3QgYXZlcmFnZVJlc3BvbnNlVGltZSA9IHJlc3BvbnNlVGltZXMucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCkgLyByZXNwb25zZVRpbWVzLmxlbmd0aFxuXG4gICAgICAvLyBHcm91cCByZXN1bHRzIGJ5IGVuZHBvaW50IGNhdGVnb3J5XG4gICAgICBjb25zdCBjYXRlZ29yeVN0YXRzID0gdGhpcy5jYXRlZ29yaXplUmVzdWx0cyhhbGxUZXN0cylcblxuICAgICAgLy8gUGVyZm9ybWFuY2UgYW5hbHlzaXNcbiAgICAgIGNvbnN0IHNsb3dlc3QgPSBhbGxUZXN0cy5yZWR1Y2UoKHByZXYsIGN1cnIpID0+IChwcmV2LnJlc3BvbnNlVGltZSA+IGN1cnIucmVzcG9uc2VUaW1lID8gcHJldiA6IGN1cnIpKVxuICAgICAgY29uc3QgZmFzdGVzdCA9IGFsbFRlc3RzLnJlZHVjZSgocHJldiwgY3VycikgPT4gKHByZXYucmVzcG9uc2VUaW1lIDwgY3Vyci5yZXNwb25zZVRpbWUgPyBwcmV2IDogY3VycikpXG5cbiAgICAgIGNvbnN0IHN1bW1hcnkgPSB7XG4gICAgICAgIHRvdGFsVGVzdHM6IGFsbFRlc3RzLmxlbmd0aCxcbiAgICAgICAgcGFzc2VkLFxuICAgICAgICBmYWlsZWQsXG4gICAgICAgIHN1Y2Nlc3NSYXRlOiBNYXRoLnJvdW5kKChwYXNzZWQgLyBhbGxUZXN0cy5sZW5ndGgpICogMTAwKSxcbiAgICAgICAgdG90YWxUaW1lOiBNYXRoLnJvdW5kKHRvdGFsVGltZSAvIDEwMDApLFxuICAgICAgICBwZXJmb3JtYW5jZToge1xuICAgICAgICAgIGF2ZXJhZ2VSZXNwb25zZVRpbWU6IE1hdGgucm91bmQoYXZlcmFnZVJlc3BvbnNlVGltZSksXG4gICAgICAgICAgc2xvd2VzdEVuZHBvaW50OiBgJHtzbG93ZXN0LmVuZHBvaW50fSAoJHtzbG93ZXN0LnJlc3BvbnNlVGltZX1tcylgLFxuICAgICAgICAgIGZhc3Rlc3RFbmRwb2ludDogYCR7ZmFzdGVzdC5lbmRwb2ludH0gKCR7ZmFzdGVzdC5yZXNwb25zZVRpbWV9bXMpYCxcbiAgICAgICAgfSxcbiAgICAgICAgY2F0ZWdvcnlTdGF0cyxcbiAgICAgICAgcmVzdWx0czogYWxsVGVzdHMsXG4gICAgICB9XG5cbiAgICAgIHRoaXMucHJpbnRDb21wcmVoZW5zaXZlU3VtbWFyeShzdW1tYXJ5KVxuICAgICAgcmV0dXJuIHN1bW1hcnlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIENvbXByZWhlbnNpdmUgdGVzdGluZyBmYWlsZWQ6JywgZXJyb3IpXG4gICAgICB0aHJvdyBlcnJvclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYXRlZ29yaXplIHRlc3QgcmVzdWx0cyBieSBlbmRwb2ludCB0eXBlXG4gICAqL1xuICBwcml2YXRlIGNhdGVnb3JpemVSZXN1bHRzKHJlc3VsdHM6IGFueVtdKTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgY29uc3QgY2F0ZWdvcmllcyA9IHtcbiAgICAgIGF1dGg6IHsgdG90YWw6IDAsIHBhc3NlZDogMCwgYXZnVGltZTogMCB9LFxuICAgICAgZmlsZXM6IHsgdG90YWw6IDAsIHBhc3NlZDogMCwgYXZnVGltZTogMCB9LFxuICAgICAgZGV0YWlsczogeyB0b3RhbDogMCwgcGFzc2VkOiAwLCBhdmdUaW1lOiAwIH0sXG4gICAgICBidWxrOiB7IHRvdGFsOiAwLCBwYXNzZWQ6IDAsIGF2Z1RpbWU6IDAgfSxcbiAgICAgIHBlcmZvcm1hbmNlOiB7IHRvdGFsOiAwLCBwYXNzZWQ6IDAsIGF2Z1RpbWU6IDAgfSxcbiAgICAgIGVycm9yczogeyB0b3RhbDogMCwgcGFzc2VkOiAwLCBhdmdUaW1lOiAwIH0sXG4gICAgfVxuXG4gICAgcmVzdWx0cy5mb3JFYWNoKChyZXN1bHQpID0+IHtcbiAgICAgIGxldCBjYXRlZ29yeSA9ICdmaWxlcycgLy8gZGVmYXVsdFxuXG4gICAgICBpZiAocmVzdWx0LmVuZHBvaW50LmluY2x1ZGVzKCcvYXV0aC8nKSkgY2F0ZWdvcnkgPSAnYXV0aCdcbiAgICAgIGVsc2UgaWYgKFxuICAgICAgICByZXN1bHQuZW5kcG9pbnQuaW5jbHVkZXMoJy9idWxrLycpIHx8XG4gICAgICAgIHJlc3VsdC5lbmRwb2ludC5pbmNsdWRlcygnL21vdmUnKSB8fFxuICAgICAgICByZXN1bHQuZW5kcG9pbnQuaW5jbHVkZXMoJy9jb3B5JykgfHxcbiAgICAgICAgcmVzdWx0LmVuZHBvaW50LmluY2x1ZGVzKCcvdHJhc2gnKVxuICAgICAgKVxuICAgICAgICBjYXRlZ29yeSA9ICdidWxrJ1xuICAgICAgZWxzZSBpZiAocmVzdWx0LmVuZHBvaW50LmluY2x1ZGVzKCcvZXNzZW50aWFsJykgfHwgcmVzdWx0LmVuZHBvaW50LmluY2x1ZGVzKCcvZXh0ZW5kZWQnKSkgY2F0ZWdvcnkgPSAnZGV0YWlscydcbiAgICAgIGVsc2UgaWYgKHJlc3VsdC5lbmRwb2ludC5pbmNsdWRlcygnL2hlYWx0aCcpIHx8IHJlc3VsdC5lbmRwb2ludC5pbmNsdWRlcygnL3BlcmZvcm1hbmNlJykgfHwgcmVzdWx0LmVuZHBvaW50LmluY2x1ZGVzKCcvY2FjaGUnKSlcbiAgICAgICAgY2F0ZWdvcnkgPSAncGVyZm9ybWFuY2UnXG4gICAgICBlbHNlIGlmIChyZXN1bHQuZW5kcG9pbnQuaW5jbHVkZXMoJ2ludmFsaWQnKSkgY2F0ZWdvcnkgPSAnZXJyb3JzJ1xuXG4gICAgICBjYXRlZ29yaWVzW2NhdGVnb3J5XS50b3RhbCsrXG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIGNhdGVnb3JpZXNbY2F0ZWdvcnldLnBhc3NlZCsrXG4gICAgICBjYXRlZ29yaWVzW2NhdGVnb3J5XS5hdmdUaW1lICs9IHJlc3VsdC5yZXNwb25zZVRpbWVcbiAgICB9KVxuXG4gICAgLy8gQ2FsY3VsYXRlIGF2ZXJhZ2VzXG4gICAgT2JqZWN0LmtleXMoY2F0ZWdvcmllcykuZm9yRWFjaCgoY2F0KSA9PiB7XG4gICAgICBjb25zdCBjYXRlZ29yeSA9IGNhdGVnb3JpZXNbY2F0XVxuICAgICAgaWYgKGNhdGVnb3J5LnRvdGFsID4gMCkge1xuICAgICAgICBjYXRlZ29yeS5hdmdUaW1lID0gTWF0aC5yb3VuZChjYXRlZ29yeS5hdmdUaW1lIC8gY2F0ZWdvcnkudG90YWwpXG4gICAgICAgIGNhdGVnb3J5LnN1Y2Nlc3NSYXRlID0gTWF0aC5yb3VuZCgoY2F0ZWdvcnkucGFzc2VkIC8gY2F0ZWdvcnkudG90YWwpICogMTAwKVxuICAgICAgfVxuICAgIH0pXG5cbiAgICByZXR1cm4gY2F0ZWdvcmllc1xuICB9XG5cbiAgLyoqXG4gICAqIFByaW50IGNvbXByZWhlbnNpdmUgdGVzdCBzdW1tYXJ5XG4gICAqL1xuICBwcml2YXRlIHByaW50Q29tcHJlaGVuc2l2ZVN1bW1hcnkoc3VtbWFyeTogYW55KTogdm9pZCB7XG4gICAgY29uc29sZS5sb2coJ1xcbicgKyAnPScucmVwZWF0KDYwKSlcbiAgICBjb25zb2xlLmxvZygn8J+TiiBDT01QUkVIRU5TSVZFIEFQSSBURVNUIFNVTU1BUlknKVxuICAgIGNvbnNvbGUubG9nKCc9Jy5yZXBlYXQoNjApKVxuXG4gICAgY29uc29sZS5sb2coYPCfp6ogVG90YWwgVGVzdHM6ICR7c3VtbWFyeS50b3RhbFRlc3RzfWApXG4gICAgY29uc29sZS5sb2coYOKchSBQYXNzZWQ6ICR7c3VtbWFyeS5wYXNzZWR9YClcbiAgICBjb25zb2xlLmxvZyhg4p2MIEZhaWxlZDogJHtzdW1tYXJ5LmZhaWxlZH1gKVxuICAgIGNvbnNvbGUubG9nKGDwn5OIIFN1Y2Nlc3MgUmF0ZTogJHtzdW1tYXJ5LnN1Y2Nlc3NSYXRlfSVgKVxuICAgIGNvbnNvbGUubG9nKGDij7HvuI8gIFRvdGFsIFRpbWU6ICR7c3VtbWFyeS50b3RhbFRpbWV9c2ApXG5cbiAgICBjb25zb2xlLmxvZygnXFxu8J+TiCBQZXJmb3JtYW5jZSBNZXRyaWNzOicpXG4gICAgY29uc29sZS5sb2coYCAgIEF2ZXJhZ2UgUmVzcG9uc2UgVGltZTogJHtzdW1tYXJ5LnBlcmZvcm1hbmNlLmF2ZXJhZ2VSZXNwb25zZVRpbWV9bXNgKVxuICAgIGNvbnNvbGUubG9nKGAgICBTbG93ZXN0OiAke3N1bW1hcnkucGVyZm9ybWFuY2Uuc2xvd2VzdEVuZHBvaW50fWApXG4gICAgY29uc29sZS5sb2coYCAgIEZhc3Rlc3Q6ICR7c3VtbWFyeS5wZXJmb3JtYW5jZS5mYXN0ZXN0RW5kcG9pbnR9YClcblxuICAgIGNvbnNvbGUubG9nKCdcXG7wn5OCIENhdGVnb3J5IEJyZWFrZG93bjonKVxuICAgIE9iamVjdC5lbnRyaWVzKHN1bW1hcnkuY2F0ZWdvcnlTdGF0cykuZm9yRWFjaCgoW2NhdGVnb3J5LCBzdGF0c106IFtzdHJpbmcsIGFueV0pID0+IHtcbiAgICAgIGlmIChzdGF0cy50b3RhbCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coYCAgICR7Y2F0ZWdvcnkudG9VcHBlckNhc2UoKX06ICR7c3RhdHMucGFzc2VkfS8ke3N0YXRzLnRvdGFsfSAoJHtzdGF0cy5zdWNjZXNzUmF0ZX0lKSAtIEF2ZzogJHtzdGF0cy5hdmdUaW1lfW1zYClcbiAgICAgIH1cbiAgICB9KVxuXG4gICAgY29uc29sZS5sb2coJ1xcbicgKyAnPScucmVwZWF0KDYwKSlcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb21wcmVoZW5zaXZlQVBJVGVzdGVyXG4iXSwibmFtZXMiOlsidGVzdENvbmZpZyIsImJhc2VVcmwiLCJzZXNzaW9uQ29va2llIiwidGVzdFRpbWVvdXQiLCJyZXRyeUF0dGVtcHRzIiwiQ29tcHJlaGVuc2l2ZUFQSVRlc3RlciIsIkFQSVRlc3RlciIsInRlc3RBdXRoRW5kcG9pbnRzIiwiY29uc29sZSIsImxvZyIsImF1dGhUZXN0cyIsInB1c2giLCJhcGlSZXF1ZXN0IiwidGVzdENvbXBsZXRlRmlsZXNBUEkiLCJmaWxlc1Rlc3RzIiwidGVzdEZpbGVEZXRhaWxFbmRwb2ludHMiLCJkZXRhaWxUZXN0cyIsInRlc3RGaWxlcyIsImZpbGVJZCIsInRlc3RCdWxrT3BlcmF0aW9uRW5kcG9pbnRzIiwiYnVsa1Rlc3RzIiwidGVzdEl0ZW1zIiwiaWQiLCJuYW1lIiwiaXNGb2xkZXIiLCJpdGVtcyIsIm1vZGUiLCJ0ZXN0UGVyZm9ybWFuY2VFbmRwb2ludHMiLCJwZXJmVGVzdHMiLCJ0ZXN0RXJyb3JIYW5kbGluZyIsImVycm9yVGVzdHMiLCJ0ZXN0Q29uY3VycmVudFJlcXVlc3RzIiwiY29uY3VycmVudFRlc3RzIiwiY29uY3VycmVudFByb21pc2VzIiwiaSIsInJlc3VsdHMiLCJQcm9taXNlIiwiYWxsIiwicnVuQ29tcHJlaGVuc2l2ZVRlc3RzIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsInNlc3Npb24iLCJ2YWxpZGF0ZVNlc3Npb24iLCJFcnJvciIsImVtYWlsIiwiYWxsVGVzdHMiLCJ0b3RhbFRpbWUiLCJwYXNzZWQiLCJmaWx0ZXIiLCJ0Iiwic3VjY2VzcyIsImxlbmd0aCIsImZhaWxlZCIsInJlc3BvbnNlVGltZXMiLCJtYXAiLCJyZXNwb25zZVRpbWUiLCJhdmVyYWdlUmVzcG9uc2VUaW1lIiwicmVkdWNlIiwiYSIsImIiLCJjYXRlZ29yeVN0YXRzIiwiY2F0ZWdvcml6ZVJlc3VsdHMiLCJzbG93ZXN0IiwicHJldiIsImN1cnIiLCJmYXN0ZXN0Iiwic3VtbWFyeSIsInRvdGFsVGVzdHMiLCJzdWNjZXNzUmF0ZSIsIk1hdGgiLCJyb3VuZCIsInBlcmZvcm1hbmNlIiwic2xvd2VzdEVuZHBvaW50IiwiZW5kcG9pbnQiLCJmYXN0ZXN0RW5kcG9pbnQiLCJwcmludENvbXByZWhlbnNpdmVTdW1tYXJ5IiwiZXJyb3IiLCJjYXRlZ29yaWVzIiwiYXV0aCIsInRvdGFsIiwiYXZnVGltZSIsImZpbGVzIiwiZGV0YWlscyIsImJ1bGsiLCJlcnJvcnMiLCJmb3JFYWNoIiwicmVzdWx0IiwiY2F0ZWdvcnkiLCJpbmNsdWRlcyIsIk9iamVjdCIsImtleXMiLCJjYXQiLCJyZXBlYXQiLCJlbnRyaWVzIiwic3RhdHMiLCJ0b1VwcGVyQ2FzZSJdLCJtYXBwaW5ncyI6IkFBQUE7OztDQUdDOzs7OytCQWlWRDs7O2VBQUE7OztrRUEvVXNDOzs7Ozs7QUFFdEMscUJBQXFCO0FBQ3JCLE1BQU1BLGFBQXlCO0lBQzdCQyxTQUFTO0lBQ1RDLGVBQWU7SUFDZkMsYUFBYTtJQUNiQyxlQUFlO0FBQ2pCO0FBRUE7O0NBRUMsR0FDRCxNQUFNQywrQkFBK0JDLGtCQUFTO0lBQzVDOztHQUVDLEdBQ0QsTUFBTUMsb0JBQW9DO1FBQ3hDQyxRQUFRQyxHQUFHLENBQUM7UUFDWixNQUFNQyxZQUFZLEVBQUU7UUFFcEJBLFVBQVVDLElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQ0MsVUFBVSxDQUFDLHFCQUFxQjtRQUMxREYsVUFBVUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDQyxVQUFVLENBQUMsdUJBQXVCO1FBRTVELE9BQU9GO0lBQ1Q7SUFFQTs7R0FFQyxHQUNELE1BQU1HLHVCQUF1QztRQUMzQ0wsUUFBUUMsR0FBRyxDQUFDO1FBQ1osTUFBTUssYUFBYSxFQUFFO1FBRXJCLDZDQUE2QztRQUM3Q0EsV0FBV0gsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDQyxVQUFVLENBQUMsb0JBQW9CO1FBQzFERSxXQUFXSCxJQUFJLENBQUMsTUFBTSxJQUFJLENBQUNDLFVBQVUsQ0FBQyxnQ0FBZ0M7UUFDdEVFLFdBQVdILElBQUksQ0FBQyxNQUFNLElBQUksQ0FBQ0MsVUFBVSxDQUFDLGdDQUFnQztRQUN0RUUsV0FBV0gsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDQyxVQUFVLENBQUMsaUNBQWlDO1FBRXZFLHFCQUFxQjtRQUNyQkUsV0FBV0gsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDQyxV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